<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="500"
        x:Class="TS4Tools.UI.Views.Dialogs.SearchWindow"
        Title="Search Resources"
        Width="600" Height="500"
        WindowStartupLocation="CenterOwner"
        CanResize="True">
    <!-- Source: legacy_references/Sims4Tools/s4pe/Tools/SearchForm.cs -->

    <DockPanel Margin="16">
        <!-- Search Controls -->
        <StackPanel DockPanel.Dock="Top" Spacing="12">
            <!-- Search Mode -->
            <Grid ColumnDefinitions="120,*">
                <TextBlock Text="Search in:" VerticalAlignment="Center" />
                <ComboBox Grid.Column="1" x:Name="SearchModeCombo" SelectedIndex="0" HorizontalAlignment="Stretch">
                    <ComboBoxItem Content="Resource Keys" />
                    <ComboBoxItem Content="Resource Names" />
                    <ComboBoxItem Content="Resource Content (Hex)" />
                </ComboBox>
            </Grid>

            <!-- Search Text -->
            <Grid ColumnDefinitions="120,*">
                <TextBlock Text="Search for:" VerticalAlignment="Center" />
                <TextBox Grid.Column="1" x:Name="SearchTextBox" Watermark="Enter search text..." />
            </Grid>

            <!-- Type Filter -->
            <Grid ColumnDefinitions="120,*,Auto">
                <CheckBox x:Name="FilterByTypeCheckBox" Content="Filter by type:" VerticalAlignment="Center" />
                <TextBox Grid.Column="1" x:Name="TypeFilterTextBox" Watermark="e.g., 220557DA" IsEnabled="{Binding #FilterByTypeCheckBox.IsChecked}" />
                <TextBlock Grid.Column="2" Text="(hex)" Margin="8,0,0,0" VerticalAlignment="Center" Opacity="0.6" />
            </Grid>

            <!-- Regex Option -->
            <CheckBox x:Name="UseRegexCheckBox" Content="Use regular expression (for Resource Keys and Names)" />

            <!-- Search Button -->
            <Grid ColumnDefinitions="*,Auto,Auto">
                <TextBlock x:Name="StatusText" Text="Ready" VerticalAlignment="Center" Opacity="0.7" />
                <Button Grid.Column="1" x:Name="SearchButton" Content="_Search" Padding="24,8" Margin="8,0" />
                <Button Grid.Column="2" Content="_Cancel" Click="CancelButton_Click" Padding="16,8" />
            </Grid>
        </StackPanel>

        <Separator DockPanel.Dock="Top" Margin="0,12" />

        <!-- Results -->
        <DockPanel>
            <TextBlock DockPanel.Dock="Top" x:Name="ResultsHeader" Text="Results:" Margin="0,0,0,8" />

            <Grid DockPanel.Dock="Bottom" ColumnDefinitions="*,Auto,Auto" Margin="0,8,0,0">
                <TextBlock x:Name="ResultsCount" Text="0 results" VerticalAlignment="Center" Opacity="0.7" />
                <Button Grid.Column="1" x:Name="GoToButton" Content="_Go to selected" Padding="16,8" Margin="8,0" IsEnabled="False" />
                <Button Grid.Column="2" x:Name="CopyKeysButton" Content="Copy _Keys" Padding="16,8" IsEnabled="False" />
            </Grid>

            <ListBox x:Name="ResultsListBox" SelectionMode="Multiple">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="{ReflectionBinding TypeName}" FontWeight="SemiBold" />
                            <TextBlock Text="{ReflectionBinding DisplayKey}" Opacity="0.7" />
                            <TextBlock Text="{ReflectionBinding InstanceName}" Foreground="DodgerBlue"
                                       IsVisible="{ReflectionBinding InstanceName, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>
    </DockPanel>
</Window>
